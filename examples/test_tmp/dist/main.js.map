{"version":3,"sources":["./src/environments/environment.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/store.ts","./src/app/app.module.ts","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  serverUrl: \"http://localhost:3000\"\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { Component } from '@angular/core';\nimport { TodoStore, Todo } from './store';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  todoStore: TodoStore;\n  newTodoText = '';\n\n  constructor(todoStore: TodoStore) {\n    this.todoStore = todoStore;\n  }\n\n  stopEditing(todo: Todo, editedTitle: string) {\n    todo.title = editedTitle;\n    todo.editing = false;\n  }\n\n  cancelEditingTodo(todo: Todo) {\n    todo.editing = false;\n  }\n\n  updateEditingTodo(todo: Todo, editedTitle: string) {\n    editedTitle = editedTitle.trim();\n    todo.editing = false;\n\n    if (editedTitle.length === 0) {\n      return this.todoStore.remove(todo);\n    }\n\n    todo.title = editedTitle;\n  }\n\n  editTodo(todo: Todo) {\n    todo.editing = true;\n  }\n\n  removeCompleted() {\n    this.todoStore.removeCompleted();\n  }\n\n  toggleCompletion(todo: Todo) {\n    this.todoStore.toggleCompletion(todo);\n  }\n\n  remove(todo: Todo){\n    this.todoStore.remove(todo);\n  }\n\n  addTodo() {\n    if (this.newTodoText.trim().length) {\n      this.todoStore.add(this.newTodoText);\n      this.newTodoText = '';\n    }\n  }\n}\n","<section class=\"todoapp\">\n  <header class=\"header\">\n    <h1>todos</h1>\n    <input class=\"new-todo\" placeholder=\"What needs to be done?\" autofocus=\"\" [(ngModel)]=\"newTodoText\" (keyup.enter)=\"addTodo()\">\n  </header>\n  <section class=\"main\" *ngIf=\"todoStore.todos.length > 0\">\n    <input id=\"toggle-all\" class=\"toggle-all\" type=\"checkbox\" *ngIf=\"todoStore.todos.length\" #toggleall [checked]=\"todoStore.allCompleted()\" (click)=\"todoStore.setAllTo(toggleall.checked)\">\n    <ul class=\"todo-list\">\n      <li *ngFor=\"let todo of todoStore.todos\" [class.completed]=\"todo.completed\" [class.editing]=\"todo.editing\">\n        <div class=\"view\">\n          <input class=\"toggle\" type=\"checkbox\" (click)=\"toggleCompletion(todo)\" [checked]=\"todo.completed\">\n          <label (dblclick)=\"editTodo(todo)\">{{todo.title}}</label>\n          <button class=\"destroy\" (click)=\"remove(todo)\"></button>\n        </div>\n        <input class=\"edit\" *ngIf=\"todo.editing\" [value]=\"todo.title\" #editedtodo (blur)=\"stopEditing(todo, editedtodo.value)\" (keyup.enter)=\"updateEditingTodo(todo, editedtodo.value)\" (keyup.escape)=\"cancelEditingTodo(todo)\">\n      </li>\n    </ul>\n  </section>\n  <footer class=\"footer\" *ngIf=\"todoStore.todos.length > 0\">\n    <span class=\"todo-count\"><strong>{{todoStore.getRemaining().length}}</strong> {{todoStore.getRemaining().length == 1 ? 'item' : 'items'}} left</span>\n    <button class=\"clear-completed\" *ngIf=\"todoStore.getCompleted().length > 0\" (click)=\"removeCompleted()\">Clear completed</button>\n  </footer>\n</section>\n","import { io, Socket } from \"socket.io-client\";\nimport { ClientEvents, ServerEvents } from \"../../../server/lib/events\";\nimport { environment } from '../environments/environment';\n\nexport interface Todo {\n  id: string,\n  title: string,\n  completed: boolean,\n  editing: boolean,\n  synced: boolean\n}\n\nconst mapTodo = (todo: any) => {\n  return {\n    ...todo,\n    editing: false,\n    synced: true\n  }\n}\n\nexport class TodoStore {\n  public todos: Array<Todo> = [];\n  private socket: Socket<ServerEvents, ClientEvents>;\n\n  constructor() {\n    this.socket = io(environment.serverUrl);\n\n    this.socket.on(\"connect\", () => {\n      this.socket.emit(\"todo:list\", (res) => {\n        if (\"error\" in res) {\n          // handle the error\n          return;\n        }\n        this.todos = res.data.map(mapTodo);\n      });\n    });\n\n    this.socket.on(\"todo:created\", (todo) => {\n      this.todos.push(mapTodo(todo));\n    });\n\n    this.socket.on(\"todo:updated\", (todo) => {\n      const existingTodo = this.todos.find(t => {\n        return t.id === todo.id\n      });\n      if (existingTodo) {\n        existingTodo.title = todo.title;\n        existingTodo.completed = todo.completed;\n      }\n    });\n\n    this.socket.on(\"todo:deleted\", (id) => {\n      const index = this.todos.findIndex(t => {\n        return t.id === id\n      });\n      if (index !== -1) {\n        this.todos.splice(index, 1);\n      }\n    })\n  }\n\n  private getWithCompleted(completed: boolean) {\n    return this.todos.filter((todo: Todo) => todo.completed === completed);\n  }\n\n  allCompleted() {\n    return this.todos.length === this.getCompleted().length;\n  }\n\n  setAllTo(completed: boolean) {\n    this.todos.forEach(todo => {\n      todo.completed = completed;\n      todo.synced = false;\n      this.socket.emit(\"todo:update\", todo, (res) => {\n        if (res && \"error\" in res) {\n          // handle the error\n          return;\n        }\n        todo.synced = true;\n      });\n    });\n  }\n\n  removeCompleted() {\n    this.getCompleted().forEach((todo) => {\n      this.socket.emit(\"todo:delete\", todo.id, (res) => {\n        if (res && \"error\" in res) {\n          // handle the error\n        }\n      });\n    })\n    this.todos = this.getRemaining();\n  }\n\n  getRemaining() {\n    return this.getWithCompleted(false);\n  }\n\n  getCompleted() {\n    return this.getWithCompleted(true);\n  }\n\n  toggleCompletion(todo: Todo) {\n    todo.completed = !todo.completed;\n    todo.synced = false;\n    this.socket.emit(\"todo:update\", todo, (res) => {\n      if (res && \"error\" in res) {\n        // handle the error\n        return;\n      }\n      todo.synced = true;\n    })\n  }\n\n  remove(todo: Todo) {\n    this.todos.splice(this.todos.indexOf(todo), 1);\n    this.socket.emit(\"todo:delete\", todo.id, (res) => {\n      if (res && \"error\" in res) {\n        // handle the error\n      }\n    });\n  }\n\n  add(title: string) {\n    this.socket.emit(\"todo:create\", { title, completed: false }, (res) => {\n      if (\"error\" in res) {\n        // handle the error\n        return;\n      }\n      this.todos.push({\n        id: res.data,\n        title,\n        completed: false,\n        editing: false,\n        synced: true\n      });\n    });\n  }\n}\n\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport { TodoStore } from './store';\nimport { FormsModule } from \"@angular/forms\";\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule\n  ],\n  providers: [TodoStore],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}